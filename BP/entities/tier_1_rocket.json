// -- VARIANTS - Used to decide which event to run
// UI : -- Variant 1
// OVERWORLD : -- Variant 2
// MOON : -- Variant 3
//
// -- EVENTS --
// launch_overworld_controller - Takes the user to the overworld
// launch_moon_controller - Takes the user to the moon
//
// -- TIERS --
// TIER 1 - unlocked by default
// TIER 2 - Mark Variant 1 +
//
{
  "format_version": "1.16.220",
  "minecraft:entity": {
    "description": {
      "identifier": "cosmo:tier_1_rocket",
      "is_spawnable": true,
      "is_summonable": true,
      "animations": {
        "rocket_ui": "animation.rocket_ui",
        "launch_overworld": "animation.launch_overworld",
        "launch_moon": "animation.launch_moon"
      },
      "scripts": {
        "animate": [
          {
            "rocket_ui": "query.is_saddled && q.has_rider && !q.variant"
          },
          {
            "launch_overworld": "q.has_rider && q.variant == 2"
          },
          {
            "launch_moon": "q.has_rider && q.variant == 3"
          }
        ]
      }
    },
    "component_groups": {
      "has_fuel": {
        "minecraft:is_saddled": {}
      },
      "tier_2": {
        "minecraft:mark_variant": {
          "value": 1
        }
      },
      "variant_ui": {
        "minecraft:variant": {
          "value": 1
        }
      }
    },
    "components": {
      "minecraft:physics": {
        "has_collision": true,
        "has_gravity": true
      },
      "minecraft:collision_box": {
        "height": 2,
        "width": 1
      },
      "minecraft:inventory": {
        "inventory_size": 2,
        "container_type": "horse"
      },
      "minecraft:npc": {},
      "minecraft:equippable": {
        "slots": [
          {
            "slot": 0,
            "item": "cosmo:fuel_tank",
            "accepted_items": [
              "cosmo:fuel_tank"
            ],
            "on_equip": {
              "event": "fuel_rocket"
            }
          }
        ]
      },
      "minecraft:rideable": {
        "controlling_seat": 1,
        "interact_text": "action.interact.tier_1_launch",
        "seats": [
          {
            "position": [
              0,
              0.4,
              0
            ]
          }
        ]
      },
      "cosmo:rocket_launch_controller": {
        "planets": [
          {
            "name": "overworld",
          },
          {
            "name": "moon"
          }
        ]
      }
    },
    "events": {
      // UI
      "open_ui": {
        "run_command": {
          "command": [
            "tag @s add ui"
          ]
        }
      },
      "close_ui": {
        "run_command": {
          "command": [
            "tag @s remove ui"
          ]
        }
      },
      // UPGRADES
      "fuel_rocket": {
        "add": {
          "component_groups": [
            "has_fuel"
          ]
        }
      },
      "upgrade_rocket": {
        "add": {
          "component_groups": [
            "tier_1"
          ]
        }
      }
    }
  }
}